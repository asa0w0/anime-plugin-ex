<div class="anime-card-enhanced">
    <LinkTo @route="anime.show" @model={{@anime.mal_id}} class="anime-card-link">
        <div class="anime-card-image">
            <img src={{@anime.images.jpg.image_url}} alt={{@anime.title}} loading="lazy" />
            <div class="anime-card-rating">
                <span class="score">⭐ {{this.animeScore}}</span>
            </div>
        </div>
        <div class="anime-card-content">
            <h3 class="anime-card-title">{{@anime.title}}</h3>

            {{#if this.typeLabel}}
            <div class="anime-card-meta">
                <span class="meta-type">{{this.typeLabel}}</span>
                {{#if this.episodeCount}}
                <span class="meta-separator">•</span>
                <span class="meta-episodes">{{this.episodeCount}}</span>
                {{/if}}
            </div>
            {{/if}}

            {{#if this.topGenres.length}}
            <div class="anime-card-genres">
                {{#each this.topGenres as |genre|}}
                <span class="genre-tag">{{genre}}</span>
                {{/each}}
            </div>
            {{/if}}
        </div>
    </LinkTo>

    {{#if this.currentUser}}
    <button type="button" class="anime-card-quick-add {{if this.isOnWatchlist " on-watchlist"}}" {{on "click"
        this.addToWatchlist}} title="Add to Watchlist">
        {{d-icon (if this.isOnWatchlist "heart" "heart")}}
    </button>
    {{/if}}
</div>